<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube最新影片連結清單</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>
    <h1>YouTube最新影片連結清單</h1>
    <ul id="videoList"></ul>
    <script>
        const apiKey = 'AIzaSyCOEsnzSTK11gzbP5SG_cgLCje5saWyO-A';
        const channelIds = [
            'UCfEbx5pXwoQuj-Y2M6zsDfw',
            'UCAeLLSfvJ-PnTja6cWQtZzA',
            'UCNBgquLyP2zOAJURDJAUYTA',
            'UCV_iUJtaJA62vnM9hM_opRw'
        ];

        function fetchLatestVideo(channelId) {
            return $.ajax({
                url: `https://www.googleapis.com/youtube/v3/search?key=${apiKey}&channelId=${channelId}&part=snippet,id&order=date&maxResults=1`,
                dataType: 'json'
            });
        }

       function displayVideoList(videos) {
			const $videoList = $('#videoList');
			$videoList.empty();

			videos.forEach((video, index) => {
				const videoUrl = `https://youtu.be/${video.id.videoId}`;
				const videoTitleArray = [
					'活潑的生命',
					'心靈蜜豆奶',
					'恩典365',
					'陪你讀聖經'
				];

				const videoTitle = videoTitleArray[index];
				const videoSubtitle = video.snippet.title;
				$videoList.append(`<li>${videoTitle}：<br>${videoSubtitle}<br><a href="${videoUrl}" target="_blank">${videoUrl}</a></li>`);
			});
		}


        function fetchAndDisplayLatestVideos() {
            const requests = channelIds.map(fetchLatestVideo);
            $.when(...requests).then((...responses) => {
                const videos = responses.map(response => response[0].items[0]);
                displayVideoList(videos);
            });
        }

        $(document).ready(fetchAndDisplayLatestVideos);
    </script>
</body>

</html>
